### 三个基本规则
优先条件：如果插入分号后解析结果是空语句，或如果插入分号后它成为 for 语句 头部的两个分号之一，那么不会自动插入分号。

1. 从左到右解析程序，当遇到一个不符合任何文法产生式的Token（叫做违规Token），那么只要满足下面条件之一就在违规Token前面自动插入分号
    - 至少一个`LineTerminator`（行分隔符） 分割了 违规Token 和前一个`Token`。
    - 违规`Token`是 `}`。

2. 从左到右解析程序，Token 输入流已经结束，当解析器无法将输入Token流解析成单个完整 ECMAScript Program，那么就在输入流的结束位置自动插入分号。

3. 从左到右解析程序，遇到一个某些文法产生式允许的 Token，但是此产生式是受限产生式，受限产生式后的第一个终结符或非终结符的 Token 叫做受限的 Token， 当至少一个`LineTerminator`（行分隔符） 分割了受限的 Token 和前一个`Token`，那么就在受限`Token`前面自动插入分号。受限产生式如下：
    - `identifier`(++、--)
    - `continue`语句
    - `break`语句
    - `return`语句
    - `throw`语句

### Examples

```javascript
{ 1 2 } 3 // 根据规则1,自动添加分号变成如下形式  
{ 1 2; } 3 // 仍然不符合ECMAScript文法，所以报错

{ 1
2 } 3 // 规则同上
{ 1
;2 ;} 3 // 符合文法

for (a; b // 不符合优先条件，不会添加分号，所以报错
)

return // 根据规则3，转换成如下形式
a + b
return;
a + b;

a = b // 同上
++c
a = b;
++c;

if (a > b) // else 这个 Token前不会被自动插入分号，因为根据优先条件自动插入分号不该解析成空语句
else c = d

a = b + c // 不会被自动插入分号，因为第二行开始位置的括号表达式可以解释成函数调用的参数列表，所以在上一行是赋值语句下一行用左括号开头的情况下，在上一行手动添加分号
(d + e).print()
```